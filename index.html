<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="manifest" href="manifest.json">
    <meta charset="UTF-8">
    <title>Case Tester</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="animate.css">

</head>
<body>

    <div id="container" class="container-fluid">

        <script>

            addEventListener("click", function() {
                var
                        el = document.documentElement
                        , rfs =
                                el.requestFullScreen
                                || el.webkitRequestFullScreen
                                || el.mozRequestFullScreen
                        ;
                rfs.call(el);
            });

        </script>



        <!--PROGRESS DISPLAY-->
        <div id="progress_container" class="row text-align-center">
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div class="circular_div col-centered invisible"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div class="circular_div col-centered invisible"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div class="circular_div col-centered invisible"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div class="circular_div col-centered invisible"></div></div>

            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle1' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1.col-md-5 .col-lg-1 col-centered"><div id='circle2' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle3' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle4' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle5' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle6' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle7' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle8' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle9' class="circular_div col-centered"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div id='circle10' class="circular_div col-centered"></div></div>

            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div class="circular_div col-centered invisible"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div class="circular_div col-centered invisible"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div class="circular_div col-centered invisible"></div></div>
            <div class=".col-sm-1 .col-md-5 .col-lg-1 col-centered"><div class="circular_div col-centered invisible"></div></div>
            </div>
        </div>



        <!--WORD TO BE DECLINED-->

            <div id="noun_container" class="row text-align-center animated bounceIn">
                <div style="padding: 0px;" class=".col-12 col-centered"><h1 id="noun_title">Собака</h1></div>
            </div>

        <!--TRANSLATION-->
        <div id="translation_container" class="row text-align-center">
            <div class=".col-12 col-centered"><h1 id="translation_title">dog</h1></div>
        </div>


        <!--CHOICE-->
        <div id="choice_container" class="row text-align-center">
            <div class=".col-5 col-centered choice"><h3 id="choice_title_left" class="choice_title">собакой</h3><br><h5 class="swipe_hint">(swipe left)</h5></div>
            <div class=".col-2 col-centered"><img id="hand_image" class="animated infinite pulse" src="static/hand.svg"/></div>
            <div class=".col-5 col-centered choice"><h3 id="choice_title_right" class="choice_title">собаке</h3><br><h5 class="swipe_hint">(swipe right)</h5></div>
        </div>



        <!--PARAMETERS (SINGULAR, GENITIVE etc.)-->
        <div id="parameters_container" class="row text-align-center">


            <div class=".col-2 col-centered margin-right-zero"><img id="quantity_image" class="parameter_symbol" src="static/singular_symbol.svg"/><br><h5 id="quantity_title" class="parameter_subtitle">singular</h5></div>
            <div class=".col-2 col-centered margin-left-zero"><img id="case_parameter_image" class="parameter_symbol" src="static/case_symbol.svg"/><br><h5 id="case_title" class="parameter_subtitle">dative</h5></div>

        </div>




    <div id="overlay" class="overlay">

        <div id="result_response_row" class="row">
            <div class=".col-12 col-centered choice">
                <h2 id="result_response_title">Молодец!</h2>
            </div>
        </div>

        <div id="result_image_row" class="row">
            <div class=".col-12 col-centered choice">
                <img id="overlay_image" src="static/tick.svg"/>
            </div>
        </div>

        <div id="correct_answer_row" class="row">
            <div class=".col-12 col-centered choice">
                <p style="display: inline;" id="correct_answer_stem">/10</p><p style="display: inline;" id="correct_answer_suffix">2</p>
            </div>
        </div>

        <div id="overlay_question_number_display_row" class="row">
            <div class=".col-12 col-centered choice">
                <h2><span id="overlay_question_number">2</span>/10</h2>
            </div>
        </div>

    </div>

    </div>

    <script src="static/jquery-3.1.1.min.js"></script>
<script src="hammer.min.js"></script>
<script>

    //    DESIGN LOGIC
    var global_answer = 'I no ting yet';
    var disable_swipe = false;
    var myElement = document.body;
    var correct_sound = new Audio('static/correct_answer.mp3');
    var incorrect_sound = new Audio('static/incorrect_answer.mp3');
    var counter = 0;

    // create a simple instance
    // by default, it only adds horizontal recognizers
    var mc = new Hammer(myElement);

    mc.on("swiperight", function(ev) {
        if(disable_swipe == false) {
            if (document.getElementById('choice_title_right').innerHTML == global_answer) {
                correctAnswer();
                console.log('swipe right!!! 1 ', global_answer)
            } else {
                incorrectAnswer();
                console.log('swipe right!!! 2', global_answer)
            }
            disable_swipe = true;
        }
    });

    // listen to events...
    mc.on("swipeleft", function(ev) {
        if(disable_swipe == false) {
            if(document.getElementById('choice_title_left').innerHTML == global_answer){
                correctAnswer();
                console.log('swipe left!!! 3', global_answer)
            }else{
                incorrectAnswer();
                console.log('swipe left!!! 4', global_answer)
            }
            disable_swipe = true;
        }
    });

    mc.on("tap", function(ev) {


        if(disable_swipe == true){
            if(counter==2){
                endRound();
            }else{
                nextAnswer();
                cancelOverlay();
                disable_swipe = false;
            }
        }
    });


    function nextAnswer(){
        question = prepareQuestion();
        document.getElementById('correct_answer_stem').innerHTML = question['stem'];
        document.getElementById('correct_answer_suffix').innerHTML = question['suffix'];
        document.getElementById('noun_title').innerHTML = question['spelling'];
        document.getElementById('translation_title').innerHTML = question['translation'];
        document.getElementById('choice_title_left').innerHTML = question['answer'];
        document.getElementById('choice_title_right').innerHTML = question['incorrect_answer'];
        document.getElementById('case_title').innerHTML = question['correct_case'];
        document.getElementById('quantity_title').innerHTML = question['quantity'];
        document.getElementById('quantity_image').src='static/'+ question['quantity'] + '_symbol.svg';
        $('#quantity_image').addClass('animated bounceIn');




    }

    function correctAnswer(){
        $('#quantity_image').removeClass('animated bounceIn');
        correct_sound.play();
        document.getElementById('overlay_image').src='static/tick.svg';
        document.getElementById('overlay').style.display = 'inline-block';
        document.getElementById('overlay').style.backgroundColor = 'rgba(83,156,244,0.86)';
        document.getElementById('result_response_title').innerHTML = 'Молодец!';
        document.getElementById('circle'+(counter).toString()).style.backgroundColor = '#00c2ca';
        resetAnimations();
    }

    function incorrectAnswer(){

        incorrect_sound.play();
        document.getElementById('overlay_image').src='static/incorrect_answer.svg';
        document.getElementById('overlay').style.display = 'inline-block';
        document.getElementById('overlay').style.backgroundColor = 'rgba(242, 85, 160, 0.86)';
        document.getElementById('result_response_title').innerHTML = 'Неправильно!';
        document.getElementById('circle'+(counter).toString()).style.backgroundColor = '#f25c79';
        resetAnimations();
    }

    function cancelOverlay(){
        document.getElementById('overlay').style.display = 'none';
    }

    function resetAnimations(){
        $('#quantity_image').removeClass('animated bounceIn');
    }


//    BACKGROUND LOGIC



var cases = ["nominative_singular", "accusative_singular", "genitive_singular", "dative_singular", "prepositional_singular", "instrumental_singular",
            "nominative_plural", "accusative_plural", "genitive_plural", "dative_plural", "prepositional_plural", "instrumental_plural"];


    var nouns = [

        {
            "spelling": "вид",
            "translation": "appearance",
            "gender": "MASCULINE",
            "nominative_singular": "вид",
            "accusative_singular": "вид",
            "genitive_singular": "виду",
            "dative_singular": "виду",
            "prepositional_singular": "видом",
            "instrumental_singular": "виде",
            "nominative_plural": "вид",
            "accusative_plural": "вид",
            "genitive_plural": "виду",
            "dative_plural": "виду",
            "prepositional_plural": "видом",
            "instrumental_plural": "виде",
            "stem": "вид"},

        {
            "spelling": "власть",
            "translation": "power",
            "gender": "FEMININE",
            "nominative_singular": "власть",
            "accusative_singular": "власть",
            "genitive_singular": "власти",
            "dative_singular": "власти",
            "prepositional_singular": "властию",
            "instrumental_singular": "власти",
            "nominative_plural": "власть",
            "accusative_plural": "власть",
            "genitive_plural": "власти",
            "dative_plural": "власти",
            "prepositional_plural": "властию",
            "instrumental_plural": "власти",
            "stem": "власт"},

        {
            "spelling": "письмо",
            "translation": "letter",
            "gender": "NEUTER",
            "nominative_singular": "письмо",
            "accusative_singular": "письмо",
            "genitive_singular": "письма",
            "dative_singular": "письму",
            "prepositional_singular": "письмом",
            "instrumental_singular": "письме",
            "nominative_plural": "письмо",
            "accusative_plural": "письмо",
            "genitive_plural": "письма",
            "dative_plural": "письму",
            "prepositional_plural": "письмом",
            "instrumental_plural": "письме",
            "stem": "письм"
        },

        {
            "spelling": "женщина",
            "translation": "woman",
            "gender": "FEMININE",
            "nominative_singular": "женщина",
            "accusative_singular": "женщину",
            "genitive_singular": "женщины",
            "dative_singular": "женщине",
            "prepositional_singular": "женщиною",
            "instrumental_singular": "женщине",
            "nominative_plural": "женщина",
            "accusative_plural": "женщину",
            "genitive_plural": "женщины",
            "dative_plural": "женщине",
            "prepositional_plural": "женщиною",
            "instrumental_plural": "женщине",
            "stem": "женщин"
        },
        {
            "spelling": "случай",
            "translation": "case",
            "gender": "MASCULINE",
            "nominative_singular": "случай",
            "accusative_singular": "случай",
            "genitive_singular": "случая",
            "dative_singular": "случаю",
            "prepositional_singular": "случаем",
            "instrumental_singular": "случае",
            "nominative_plural": "случай",
            "accusative_plural": "случай",
            "genitive_plural": "случая",
            "dative_plural": "случаю",
            "prepositional_plural": "случаем",
            "instrumental_plural": "случае",
            "stem": "случа"
        },
        {
            "spelling": "воздух",
            "translation": "air",
            "gender": "MASCULINE",
            "nominative_singular": "воздух",
            "accusative_singular": "воздух",
            "genitive_singular": "воздуху",
            "dative_singular": "воздуху",
            "prepositional_singular": "воздухом",
            "instrumental_singular": "воздухе",
            "nominative_plural": "воздух",
            "accusative_plural": "воздух",
            "genitive_plural": "воздуху",
            "dative_plural": "воздуху",
            "prepositional_plural": "воздухом",
            "instrumental_plural": "воздухе",
            "stem": "воздух"
        },
        {
            "spelling": "правда",
            "translation": "truth",
            "gender": "FEMININE",
            "nominative_singular": "правда",
            "accusative_singular": "правду",
            "genitive_singular": "правды",
            "dative_singular": "правде",
            "prepositional_singular": "правдою",
            "instrumental_singular": "правде",
            "nominative_plural": "правда",
            "accusative_plural": "правду",
            "genitive_plural": "правды",
            "dative_plural": "правде",
            "prepositional_plural": "правдою",
            "instrumental_plural": "правде",
            "stem": "правд"
        },
        {
            "spelling": "лес",
            "translation": "forest",
            "gender": "MASCULINE",
            "nominative_singular": "лес",
            "accusative_singular": "лес",
            "genitive_singular": "лесу",
            "dative_singular": "лесу",
            "prepositional_singular": "лесом",
            "instrumental_singular": "лесу",
            "nominative_plural": "лес",
            "accusative_plural": "лес",
            "genitive_plural": "лесу",
            "dative_plural": "лесу",
            "prepositional_plural": "лесом",
            "instrumental_plural": "лесу",
            "stem": "лес"
        },
        {
            "spelling": "путь",
            "translation": "way, track, path",
            "gender": "MASCULINE",
            "nominative_singular": "путь",
            "accusative_singular": "путь",
            "genitive_singular": "пути",
            "dative_singular": "путю",
            "prepositional_singular": "путём",
            "instrumental_singular": "путе",
            "nominative_plural": "путь",
            "accusative_plural": "путь",
            "genitive_plural": "пути",
            "dative_plural": "путю",
            "prepositional_plural": "путём",
            "instrumental_plural": "путе",
            "stem": "пут"
        },
        {
            "spelling": "работа",
            "translation": "work, job",
            "gender": "FEMININE",
            "nominative_singular": "работа",
            "accusative_singular": "работу",
            "genitive_singular": "работы",
            "dative_singular": "работе",
            "prepositional_singular": "работою",
            "instrumental_singular": "работе",
            "nominative_plural": "работа",
            "accusative_plural": "работу",
            "genitive_plural": "работы",
            "dative_plural": "работе",
            "prepositional_plural": "работою",
            "instrumental_plural": "работе",
            "stem": "работ"
        }
    ];


    function prepareQuestion(){

        spelling = nouns[counter]['spelling'];
        translation = nouns[counter]['translation'];
        shuffeld_cases = shuffle(cases);
        var correct_case = shuffeld_cases[0];
        var incorrect_case = shuffeld_cases[1];
        var answer = nouns[counter][correct_case];
        var incorrect_answer = nouns[counter][incorrect_case];
        var stem = nouns[counter]['stem'];
        var suffix = answer.replace(stem, "");


        if(correct_case.includes("plural")){
            quantity = 'plural';
        }else{
            quantity = 'singular';
        }

        counter += 1;
        global_answer = answer;
        document.getElementById('overlay_question_number').innerHTML = (counter).toString();
        return {'spelling': spelling, 'translation': translation, 'answer': answer, 'incorrect_answer': incorrect_answer, 'correct_case':correct_case.split('_')[0], 'quantity': quantity, 'stem': stem, 'suffix': suffix}
    }


    function shuffle(array) {
        var currentIndex = array.length, temporaryValue, randomIndex;

        // While there remain elements to shuffle...
        while (0 !== currentIndex) {

            // Pick a remaining element...
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;

            // And swap it with the current element.
            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
        }

        return array;
    }

    function endRound(){
        incorrect_sound.play();
        document.getElementById('overlay_image').src='static/incorrect_answer.svg';
        document.getElementById('result_response_title').innerHTML = 'Score';
        document.getElementById('overlay').style.display = 'inline-block';
        document.getElementById('overlay').style.backgroundColor = 'rgba(242, 85, 160, 0.86)';
        document.getElementById('circle'+(counter).toString()).style.backgroundColor = '#f25c79';
        resetAnimations();

        for(i = 1; i < 11; i++) {
            document.getElementById('circle' + (i).toString()).style.backgroundColor = '#fff';
        }
        counter = 0;
    }




nextAnswer();

</script>
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="../../dist/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
</body>
</html>